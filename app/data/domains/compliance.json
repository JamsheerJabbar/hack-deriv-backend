{
  "domain": "compliance",
  "description": "Configuration for compliance domain",
  "schema_context": "The database manages compliance-related information for users and their activities. Key entities include 'users' (customer profiles with KYC status, risk assessment, and account details), 'transactions' (financial activities with instrument, amount, and status), 'login_events' (user authentication attempts and outcomes), 'alert_rules' (defined conditions for triggering compliance alerts), 'alerts' (generated compliance alerts with status and details), 'audit_logs' (records of system actions and queries), and 'dashboards' (pre-defined analytical views).  User demographics include 'country' (e.g., AE, AU, CA, CH, DE), and 'risk_level' can be HIGH, MEDIUM, or LOW. Transaction types include DEPOSIT, WITHDRAWAL, TRADE, FEE, and BONUS. KYC statuses are EXPIRED, PENDING, REJECTED, and VERIFIED. Alert severities range from LOW to CRITICAL. Login statuses include SUCCESS, FAILED, and BLOCKED. Account statuses include ACTIVE, FROZEN, and SUSPENDED.",
  "prompts": {
    "intent": "You are an AI assistant...\n\nDOMAIN SPECIFIC INSTRUCTION:\nWhen referring to user verification, use the term KYC and its possible values: EXPIRED, PENDING, REJECTED, VERIFIED. When referring to flagged transactions, consider flag reasons: Automated screening, Risk threshold exceeded, Large amount, Unusual pattern. Risk levels are HIGH, MEDIUM or LOW. A user can also be a PEP (Politically Exposed Person).\n\nDOMAIN SPECIFIC INSTRUCTION:\nWhen a user asks about financial activities, transactions, or monetary amounts, classify the intent as 'Financial Transaction Analysis'. When queries involve user authentication, login attempts, or account access, classify the intent as 'User Authentication and Security'. For questions related to KYC, risk levels, or compliance checks, classify the intent as 'Compliance and Risk Management'. If the query concerns system actions, access logs, or data exports, classify it as 'Audit and System Monitoring'. When users inquire about pre-defined reports or data visualizations, classify it as 'Dashboard and Reporting'.",
    "sql": null
  },
  "few_shots": [
    {
      "question": "What are the number of users with HIGH risk level?",
      "sql": "SELECT count(*) FROM users WHERE risk_level = 'HIGH'",
      "explanation": "This query counts the number of users in the 'users' table where the 'risk_level' column is equal to 'HIGH'."
    },
    {
      "question": "Show the last 5 transactions with status FLAGGED.",
      "sql": "SELECT * FROM transactions WHERE status = 'FLAGGED' ORDER BY created_at DESC LIMIT 5",
      "explanation": "This query retrieves all columns from the 'transactions' table, filters for transactions where the 'status' is 'FLAGGED', orders them by the 'created_at' column in descending order to get the most recent transactions, and limits the result to the top 5."
    },
    {
      "question": "List user id and email address for those whose KYC status is EXPIRED.",
      "sql": "SELECT user_id, email FROM users WHERE kyc_status = 'EXPIRED'",
      "explanation": "This query selects the user_id and email from the 'users' table, filtering for users where the 'kyc_status' is 'EXPIRED'."
    },
    {
      "question": "How many login events resulted in ACCOUNT_LOCKED?",
      "sql": "SELECT count(*) FROM login_events WHERE failure_reason = 'ACCOUNT_LOCKED'",
      "explanation": "This query counts all rows from the 'login_events' table where the 'failure_reason' column has the value 'ACCOUNT_LOCKED'."
    },
    {
      "question": "Show the alert rules with severity HIGH or CRITICAL.",
      "sql": "SELECT * FROM alert_rules WHERE severity IN ('HIGH', 'CRITICAL')",
      "explanation": "This query retrieves all columns from the 'alert_rules' table, filtering for rules where the 'severity' column is either 'HIGH' or 'CRITICAL'."
    },
    {
      "question": "Show me all users from 'AU' who have 'VERIFIED' KYC status.",
      "sql": "SELECT * FROM users WHERE country = 'AU' AND kyc_status = 'VERIFIED'",
      "explanation": "This query directly filters the 'users' table based on country and KYC status, using exact values found in the sample data. It's a common request to identify specific user segments."
    },
    {
      "question": "List all 'FAILED' transactions along with their transaction IDs and amounts in USD.",
      "sql": "SELECT txn_id, amount_usd FROM transactions WHERE status = 'FAILED'",
      "explanation": "This query retrieves specific details ('txn_id', 'amount_usd') from the 'transactions' table, filtering by the 'FAILED' status. This is a typical need for investigating transaction issues."
    },
    {
      "question": "Find login events that were 'BLOCKED' and occurred in 'CA'.",
      "sql": "SELECT * FROM login_events WHERE status = 'BLOCKED' AND country = 'CA'",
      "explanation": "This query targets the 'login_events' table, filtering by a specific 'status' ('BLOCKED') and 'country' ('CA'), both present in the sample data. This helps in identifying security concerns."
    },
    {
      "question": "What are the details of alerts with 'CRITICAL' severity and 'OPEN' status?",
      "sql": "SELECT * FROM alerts WHERE severity = 'CRITICAL' AND status = 'OPEN'",
      "explanation": "This query focuses on the 'alerts' table, filtering by 'severity' and 'status' using exact values found in the samples. This is crucial for prioritizing immediate compliance actions."
    },
    {
      "question": "List all users who are marked as 'is_pep' (Politically Exposed Person).",
      "sql": "SELECT * FROM users WHERE is_pep = 1",
      "explanation": "This query filters the 'users' table based on the 'is_pep' flag, which is represented by binary values (0 or 1) in the sample data. Identifying PEPs is a standard compliance requirement."
    }
  ]
}