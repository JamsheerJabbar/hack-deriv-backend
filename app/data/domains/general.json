{
  "domain": "general",
  "description": "Configuration for general domain",
  "schema_context": "The database contains information about users, their transactions, login events, security alerts, and system audit logs. \n\n- `users`: Stores user profile information including personal details (name, DOB, country, phone), KYC status and expiry, risk assessment (level, score, PEP status), account status, and timestamps for creation and updates.\n- `transactions`: Records all financial transactions, including user ID, transaction type (DEPOSIT, WITHDRAWAL, TRADE, FEE, BONUS), instrument traded, amount, currency, USD equivalent, status, payment method, external references, IP address, and timestamps for creation and processing.\n- `login_events`: Logs user login attempts, capturing user ID, attempted email, IP address, geographical location (country, city), device details (type, fingerprint, user agent), login status (SUCCESS, FAILED, BLOCKED), and reasons for failure.\n- `alert_rules`: Defines rules for generating security alerts, including rule name, type (THRESHOLD, VELOCITY, TIME, GEO, PATTERN), conditions with specific field/event/operator/value configurations, severity, and activation status.\n- `alerts`: Stores generated security alerts, linking to rule names and IDs, user IDs, transaction IDs, severity, status (OPEN, RESOLVED, INVESTIGATING, DISMISSED), detailed information, assigned personnel, and resolution timestamps/notes.\n- `audit_logs`: Tracks system actions performed by users, including actor ID, action type (VIEW, QUERY, UPDATE, EXPORT, LOGIN), resource type and ID being acted upon, the executed query text, IP address, and timestamp.\n- `dashboards`: Manages user-defined dashboards, including dashboard name, owner, widget configurations (type, data source), layout specifications, deployment status, URL, and refresh intervals.",
  "prompts": {
    "intent": "You are an AI assistant...\n\nDOMAIN SPECIFIC INSTRUCTION:\nAdd this instruction to the system prompt: Focus on understanding KYC status, PEP status, alert severities, transaction types, and account statuses. Pay close attention to the column `instrument` which represents the asset the transaction is related to.\n\nDOMAIN SPECIFIC INSTRUCTION:\nWhen a user asks about KYC status, account status, PEP status, risk level, txn_type, failure_reason or severity, always use the exact values given in the data and return results with only those values. For example, if the user asks for 'high risk users', filter the users table by the risk_level column where risk_level = 'HIGH'.\n\nDEMO STORY USERS:\n1. Ahmed Al-Rashid (AE): Model VIP user, ID USR-0001.\n2. John Smith (GB): PEP user, ID USR-0042.\n3. Maria Garcia (US): KYC Pending backlog, ID USR-0099.\n4. Suspicious User (NG): Structuring candidate, ID USR-0150. Look for deposits between $9000-$9999.\n5. Account Takeover Victim (DE): Focus on USR-0200 for ATO scenarios.\n6. Multi-Account Fraudster (RU): ID USR-0250. Look for shared device_fingerprint patterns.\n7. Sanctioned User (IR): ID USR-0350. Blocked case.",
    "sql": null
  },
  "few_shots": [
    {
      "question": "Show transactions for Ahmed Al-Rashid",
      "sql": "SELECT * FROM transactions WHERE user_id = (SELECT user_id FROM users WHERE full_name = 'Ahmed Al-Rashid');",
      "explanation": "Retrieves all transactions for the specific story user Ahmed Al-Rashid."
    },
    {
      "question": "Identify potential structuring for the suspicious user USR-0150",
      "sql": "SELECT user_id, amount_usd, created_at, flag_reason FROM transactions WHERE user_id = 'USR-0150' AND amount_usd BETWEEN 9000 AND 9999 ORDER BY created_at DESC;",
      "explanation": "Highlights transactions used in the structuring demo pattern where amounts are just below the 10k threshold."
    },
    {
      "question": "Investigate login anomalies for the Account Takeover Victim USR-0200",
      "sql": "SELECT * FROM login_events WHERE user_id = 'USR-0200' ORDER BY created_at DESC LIMIT 10;",
      "explanation": "Shows recent logins for user USR-0200 to help visualize the password reset and new device pattern."
    },
    {
      "question": "Show alerts for the PEP user John Smith",
      "sql": "SELECT a.* FROM alerts a JOIN users u ON a.user_id = u.user_id WHERE u.full_name = 'John Smith';",
      "explanation": "Lists compliance alerts specifically triggered by PEP account activity."
    },
    {
      "question": "What are the full names of users with KYC status 'VERIFIED' from 'DE'?",
      "sql": "SELECT full_name FROM users WHERE kyc_status = 'VERIFIED' AND country = 'DE'",
      "explanation": "This query selects the `full_name` column from the `users` table, filtering for users whose `kyc_status` is 'VERIFIED' and `country` is 'DE'."
    },
    {
      "question": "Show me all users with KYC status 'VERIFIED' from country 'DE'.",
      "sql": "SELECT user_id, email, full_name FROM users WHERE kyc_status = 'VERIFIED' AND country = 'DE';",
      "explanation": "This query selects the user ID, email, and full name from the 'users' table, filtering for users whose KYC status is 'VERIFIED' and who are from the country 'DE'."
    },
    {
      "question": "Find the email attempted and status of login events with failure reason 'WRONG_PASSWORD'.",
      "sql": "SELECT email_attempted, status FROM login_events WHERE failure_reason = 'WRONG_PASSWORD'",
      "explanation": "This query selects the `email_attempted` and `status` columns from the `login_events` table, filtering for events where the `failure_reason` is 'WRONG_PASSWORD'."
    },
    {
      "question": "How many users have a HIGH risk level and are marked as a PEP?",
      "sql": "SELECT COUNT(user_id) FROM users WHERE risk_level = 'HIGH' AND is_pep = 1",
      "explanation": "This query counts the number of users in the `users` table who have a 'HIGH' risk level and are also marked as Politically Exposed Persons (is_pep = 1)."
    }
  ]
}